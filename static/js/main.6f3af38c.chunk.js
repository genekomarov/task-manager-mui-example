(this["webpackJsonp2020-06-03_template_material-ui_task-manager"]=this["webpackJsonp2020-06-03_template_material-ui_task-manager"]||[]).push([[0],{194:function(e,t,n){e.exports=n(248)},199:function(e,t,n){},200:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),s=n.n(c),i=(n(199),n(36)),o=n(29),l=(n(200),n(293)),u=n(295),m=n(17),d=n(318),f=n(317),p=n(308),E=n(320),h=n(322),b=n(305),g=n(319),j=n(171),O=n.n(j),v=n(301),k=n(300),S=n(118),w=n.n(S),I=n(251),y=n(296),T=n(297),_=n(299),N=n(64),C=n.n(N),x=n(65),D=n.n(x),F=n(149),A=n.n(F),P=n(151),R=n.n(P),L=n(298),M=n(16),W=n(8),U=n.n(W),z=n(14),G=n(6),H=n(144),K=n.n(H),B=function(e,t){return t?t.map((function(t){return"".concat(e,"=").concat(t,"&")})).toString().replace(/,/g,""):""},J=K.a.create({withCredentials:!0,baseURL:"https://my-json-server.typicode.com/genekomarov/task-manager_mui",headers:{}}),V=function(e,t){return J.get("/authData?email=".concat(e,"&password=").concat(t)).then((function(e){return e.data}))},Z=function(e){return e.length?J.get("/users?".concat(B("id",e))).then((function(e){return e.data})):[]},X=function(e){return e.length?J.get("/projects-to-users?".concat(B("projectId",e))).then((function(e){return e.data})):[]},$=function(e){return e.length?J.get("/projects?".concat(B("id",e))).then((function(e){return e.data})):[]},q=function(e){return e.length?J.get("/projects-to-users?".concat(B("userId",e))).then((function(e){return e.data})):[]},Y=function(e,t){return e||t?J.get("/tasks?".concat(B("project",e)).concat(B("author",t))).then((function(e){return e.data})):[]},Q=n(34),ee=n(145),te=function e(){Object(ee.a)(this,e),this.message=void 0,this.message="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c"},ne=n(54),ae=n.n(ne),re={id:null,email:null,nickname:null,isAuth:!1,loginFormShown:!1,loginErrorMessage:null},ce=function(e,t,n,a){return{type:"auth/SET_USER_DATA",id:e,email:t,nickname:n,isAuth:a}},se=function(e){return{type:"auth/SHOW_LOGIN_FORM",loginFormShown:e}},ie=function(e){return{type:"auth/SET_LOGIN_ERROR_MESSAGE",loginErrorMessage:e}},oe=function(e,t){return function(){var n=Object(z.a)(U.a.mark((function n(a){var r,c;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,V(e,t);case 3:if(0!==(r=n.sent).length){n.next=6;break}throw new te;case 6:return n.next=8,Z([r[0].id]);case 8:if(c=n.sent,0!==r.length){n.next=11;break}throw new te;case 11:a(ce(r[0].id,r[0].email,c[0].nickname,!0)),a(se(!1)),a(ie(null)),ae.a.set("email",e),ae.a.set("password",t),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),a(ie("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b email \u0438\u043b\u0438 password!"));case 21:case"end":return n.stop()}}),n,null,[[0,18]])})));return function(e){return n.apply(this,arguments)}}()},le=function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(se(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(G.a)(Object(G.a)({},e),{},{id:t.id,email:t.email,nickname:t.nickname,isAuth:t.isAuth});case"auth/SHOW_LOGIN_FORM":return Object(G.a)(Object(G.a)({},e),{},{loginFormShown:t.loginFormShown});case"auth/SET_LOGIN_ERROR_MESSAGE":return Object(G.a)(Object(G.a)({},e),{},{loginErrorMessage:t.loginErrorMessage});default:return e}},me={isInitialized:!1,errors:[]},de=function(e){return{type:"app/SET_INITIALIZED",isInitialized:e}},fe=function(e){return{type:"app/ADD_ERROR",message:e}},pe=function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(fe(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED":return Object(G.a)(Object(G.a)({},e),{},{isInitialized:t.isInitialized});case"app/ADD_ERROR":return Object(G.a)(Object(G.a)({},e),{},{errors:[].concat(Object(Q.a)(e.errors),[t.message])});default:return e}},he={projects:[],isFetching:!1,selectedProjectId:null},be=function(e){return{type:"projects/SET_PROJECTS",projects:e,selectedProjectId:e.length>0?e[0].id:null}},ge=function(e){return{type:"projects/SET_FETCHING",isFetching:e}},je=function(e){return{type:"projects/SET_SELECTED_PROJECT_ID",selectedProjectId:e}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"projects/SET_PROJECTS":return Object(G.a)(Object(G.a)({},e),{},{projects:t.projects,selectedProjectId:t.selectedProjectId});case"projects/SET_FETCHING":return Object(G.a)(Object(G.a)({},e),{},{isFetching:t.isFetching});case"projects/SET_SELECTED_PROJECT_ID":return Object(G.a)(Object(G.a)({},e),{},{selectedProjectId:t.selectedProjectId});default:return e}},ve=n(150),ke=n.n(ve),Se={users:[],isFetching:!1,selectedUserId:null},we=function(e){return{type:"users/SET_USERS",users:e}},Ie=function(e){return{type:"users/SET_FETCHING",isFetching:e}},ye=function(e){return{type:"users/SET_SELECTED_USER_ID",selectedUserId:e}},Te=function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ye(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/SET_USERS":return Object(G.a)(Object(G.a)({},e),{},{users:t.users});case"users/SET_FETCHING":return Object(G.a)(Object(G.a)({},e),{},{isFetching:t.isFetching});case"users/SET_SELECTED_USER_ID":return Object(G.a)(Object(G.a)({},e),{},{selectedUserId:t.selectedUserId});default:return e}},Ne={clientSideData:{users:{items:[],deleted:[]},authData:{items:[],deleted:[]},projectsToUsers:{items:[],deleted:[]},projects:{items:[],deleted:[]},tasks:{items:[],deleted:[]}}},Ce=function(e,t){return{type:"ADD_ID_TO_DELETED",tableName:e,itemId:t}},xe=function(e,t){return{type:"ADD_NEW_ITEM",tableName:e,item:t}},De=function(e,t){return{type:"DELETE_ITEM",tableName:e,itemId:t}},Fe=function(e,t){return function(){var n=Object(z.a)(U.a.mark((function n(a){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(Ce(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ae=function(e,t){return function(){var n=Object(z.a)(U.a.mark((function n(a){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(xe(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Pe=function(e,t){return function(){var n=Object(z.a)(U.a.mark((function n(a){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(De(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ID_TO_DELETED":return Object(G.a)(Object(G.a)({},e),{},{clientSideData:Object(G.a)(Object(G.a)({},e.clientSideData),{},Object(o.a)({},t.tableName,Object(G.a)(Object(G.a)({},e.clientSideData[t.tableName]),{},{deleted:[].concat(Object(Q.a)(e.clientSideData[t.tableName].deleted),[t.itemId])})))});case"ADD_NEW_ITEM":return Object(G.a)(Object(G.a)({},e),{},{clientSideData:Object(G.a)(Object(G.a)({},e.clientSideData),{},Object(o.a)({},t.tableName,Object(G.a)(Object(G.a)({},e.clientSideData[t.tableName]),{},{items:[].concat(Object(Q.a)(e.clientSideData[t.tableName].items),[t.item])})))});case"DELETE_ITEM":return Object(G.a)(Object(G.a)({},e),{},{clientSideData:Object(G.a)(Object(G.a)({},e.clientSideData),{},Object(o.a)({},t.tableName,Object(G.a)(Object(G.a)({},e.clientSideData[t.tableName]),{},{items:Object(Q.a)(e.clientSideData[t.tableName].items).filter((function(e){return e.id!==t.itemId}))})))});default:return e}},Le={tasks:[],isFetching:!1,filter:{userIds:null,status:null,content:null},sort:{firstCompleted:null,firstNew:null},countOfShownTasks:0,idCounter:1e3},Me=function(e){return{type:"tasks/SET_TASKS",tasks:e}},We=function(e){return{type:"tasks/SET_FETCHING",isFetching:e}},Ue=function(e){return{type:"tasks/SET_FILTER",filter:e}},ze=function(e){return{type:"tasks/SET_SORT",sort:e}},Ge=function(e){return{type:"tasks/SET_COUNT_OF_SHOWN_TASKS",countOfShownTasks:e}},He=function(e,t,n){return{type:"tasks/CHANGE_TASK",taskId:e,status:t,title:n}},Ke=function(e){return{type:"tasks/DELETE_TASK",taskId:e}},Be=function(e){return{type:"tasks/NEW_TASK",task:e}},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(z.a)(U.a.mark((function n(a){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&a(Ue({userIds:void 0!==e.userIds?null:void 0,status:void 0!==e.status?null:void 0,content:void 0!==e.content?null:void 0})),a(Ue(e));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ve=function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ze(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tasks/SET_TASKS":return Object(G.a)(Object(G.a)({},e),{},{tasks:t.tasks});case"tasks/SET_FETCHING":return Object(G.a)(Object(G.a)({},e),{},{isFetching:t.isFetching});case"tasks/SET_FILTER":return Object(G.a)(Object(G.a)({},e),{},{filter:Object(G.a)(Object(G.a)({},e.filter),{},{userIds:void 0===t.filter.userIds?e.filter.userIds:null===t.filter.userIds?null:e.filter.userIds?[].concat(Object(Q.a)(e.filter.userIds),Object(Q.a)(t.filter.userIds)):Object(Q.a)(t.filter.userIds),status:void 0===t.filter.status?e.filter.status:t.filter.status,content:void 0===t.filter.content?e.filter.content:t.filter.content})});case"tasks/SET_SORT":return Object(G.a)(Object(G.a)({},e),{},{sort:Object(G.a)(Object(G.a)({},e.sort),{},{firstCompleted:void 0===t.sort.firstCompleted?e.sort.firstCompleted:t.sort.firstCompleted,firstNew:void 0===t.sort.firstNew?e.sort.firstNew:t.sort.firstNew})});case"tasks/SET_COUNT_OF_SHOWN_TASKS":return Object(G.a)(Object(G.a)({},e),{},{countOfShownTasks:t.countOfShownTasks});case"tasks/DELETE_TASK":return Object(G.a)(Object(G.a)({},e),{},{tasks:Object(Q.a)(e.tasks.filter((function(e){return e.id!==t.taskId})))});case"tasks/CHANGE_TASK":var n=e.tasks.findIndex((function(e){return e.id===t.taskId}));return-1===n?e:Object(G.a)(Object(G.a)({},e),{},{tasks:[].concat(Object(Q.a)(e.tasks.filter((function(e){return e.id!==t.taskId}))),[Object(G.a)(Object(G.a)({},e.tasks[n]),{},{isDone:t.status,title:t.title})])});case"tasks/NEW_TASK":return Object(G.a)(Object(G.a)({},e),{},{idCounter:e.idCounter+1});default:return e}},Xe=Object(l.a)((function(e){return Object(u.a)({root:{display:"flex",flexDirection:"column"},progress:{alignSelf:"center",margin:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}})})),$e={getProjects:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){var a,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(ge(!0)),t.next=4,q(e);case 4:return a=t.sent,t.next=7,$(a.map((function(e){return e.projectId})));case 7:r=t.sent,n(be(r)),n(ge(!1)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n(pe(t.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},setProjects:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(be(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setSelectedProjectId:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(je(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setSelectedUserId:Te,setFilter:Je,setSort:Ve},qe=Object(M.b)((function(e){return{isFetching:e.projects.isFetching,isAuth:e.auth.isAuth,projects:e.projects.projects,myId:e.auth.id,selectedProjectId:e.projects.selectedProjectId,isInitialized:e.app.isInitialized}}),$e)((function(e){Object(a.useEffect)((function(){null!==e.myId?e.getProjects([e.myId]):e.setProjects([])}),[e.myId]);var t=Xe(),n=r.a.useState(!0),c=Object(i.a)(n,2),s=c[0],o=c[1];return r.a.createElement("div",{className:t.root},r.a.createElement(I.a,{button:!0,onClick:function(){o(!s)}},r.a.createElement(y.a,null,r.a.createElement(A.a,null)),r.a.createElement(T.a,{primary:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",primaryTypographyProps:{variant:"body1"}}),s?r.a.createElement(C.a,null):r.a.createElement(D.a,null)),e.isFetching&&e.isAuth?r.a.createElement(L.a,{className:t.progress}):r.a.createElement(_.a,{in:s,timeout:"auto",unmountOnExit:!0},e.isAuth&&e.projects.map((function(n){return r.a.createElement(k.a,{component:"div",disablePadding:!0,key:n.id},r.a.createElement(I.a,{button:!0,className:t.nested,onClick:function(){return t=n.id,e.setSelectedProjectId(t),e.setFilter({userIds:null,status:null,content:null}),e.setSort({firstCompleted:null,firstNew:null}),void e.setSelectedUserId(null);var t}},r.a.createElement(y.a,null,n.id===e.selectedProjectId?r.a.createElement(ke.a,null):r.a.createElement(R.a,null)),r.a.createElement(T.a,{primary:n.projectName})))}))))})),Ye=n(152),Qe=n.n(Ye),et=n(97),tt=n.n(et),nt=n(154),at=n.n(nt),rt=n(153),ct=n.n(rt),st=Object(l.a)((function(e){return Object(u.a)({root:{display:"flex",flexDirection:"column"},progress:{alignSelf:"center",margin:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}})})),it={setFetching:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Ie(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsers:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){var a,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Ie(!0)),t.next=4,X(e);case 4:return a=t.sent,t.next=7,Z(a.map((function(e){return e.userId})));case 7:r=t.sent,n(we(r)),n(Ie(!1)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n(pe(t.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},setSelectedUserId:Te,setFilter:Je},ot=Object(M.b)((function(e){return{isFetching:e.users.isFetching,isAuth:e.auth.isAuth,projectsIsFetching:e.projects.isFetching,selectedProjectId:e.projects.selectedProjectId,users:e.users.users,selectedUserId:e.users.selectedUserId,tasks:e.tasks.tasks}}),it)((function(e){Object(a.useEffect)((function(){e.projectsIsFetching&&e.setFetching(!0)}),[e.projectsIsFetching]),Object(a.useEffect)((function(){null!==e.selectedProjectId&&e.getUsers([e.selectedProjectId])}),[e.selectedProjectId]);var t=st(),n=r.a.useState(!0),c=Object(i.a)(n,2),s=c[0],o=c[1];return r.a.createElement("div",{className:t.root},r.a.createElement(I.a,{button:!0,onClick:function(){o(!s)}},r.a.createElement(y.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(T.a,{primary:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430",primaryTypographyProps:{variant:"body1"}}),s?r.a.createElement(C.a,null):r.a.createElement(D.a,null)),e.isFetching&&e.isAuth?r.a.createElement(tt.a,{className:t.progress}):r.a.createElement(_.a,{in:s,timeout:"auto",unmountOnExit:!0},e.isAuth&&e.users.map((function(n){return r.a.createElement(k.a,{component:"div",disablePadding:!0,key:n.id},r.a.createElement(I.a,{button:!0,className:t.nested,onClick:function(){return t=n.id,e.setSelectedUserId(t),void e.setFilter({userIds:[t],status:void 0,content:void 0},!0);var t}},r.a.createElement(y.a,null,n.id===e.selectedUserId?r.a.createElement(ct.a,null):r.a.createElement(at.a,null)),r.a.createElement(T.a,{primary:"".concat(n.nickname," (").concat(e.tasks.filter((function(e){return e.author===n.id})).length,")")})))}))))})),lt=Object(l.a)((function(e){return Object(u.a)({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},verticalSpacing:{display:"flex",alignItems:"center",padding:e.spacing(2,1),justifyContent:"flex-end"}})})),ut=function(){var e=lt();return r.a.createElement(k.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(v.a,{component:"div",id:"nested-list-subheader"},"\u041c\u0435\u043d\u044e"),className:e.root},r.a.createElement(w.a,null),r.a.createElement(qe,null),r.a.createElement("div",{className:e.verticalSpacing}),r.a.createElement(ot,null),r.a.createElement(w.a,null))},mt=n(59),dt=n(304),ft=n(173),pt=n(119),Et=n.n(pt),ht=n(158),bt=n.n(ht),gt=n(155),jt=n(306),Ot=Object(l.a)((function(e){return Object(u.a)({grow:{flexGrow:1},title:Object(o.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(o.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(o.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),typography__authorizedUserNickname:{marginRight:e.spacing(2),alignSelf:"center"}})})),vt={logout:function(){return function(){var e=Object(z.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae.a.remove("email"),ae.a.remove("password"),t(ce(null,null,null,!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},showLoginForm:le},kt=Object(M.b)((function(e){return{countOfShownTasks:e.tasks.countOfShownTasks,myNickname:e.auth.nickname,isAuth:e.auth.isAuth}}),vt)((function(e){var t=Ot(),n=r.a.useState(null),a=Object(i.a)(n,2),c=a[0],s=a[1],o=r.a.useState(null),l=Object(i.a)(o,2),u=l[0],m=l[1],d=Boolean(c),f=Boolean(u),p=function(e){s(e.currentTarget)},E=function(){m(null)},h=function(){s(null),E()},g=function(){e.showLoginForm(!0)},j=e.isAuth?e.countOfShownTasks:0,O="primary-search-account-menu",v=r.a.createElement(ft.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:O,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:h},r.a.createElement(dt.a,{onClick:function(){h(),e.logout()}},"\u0412\u044b\u0439\u0442\u0438")),k=r.a.createElement(ft.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:E},e.isAuth?r.a.createElement(dt.a,{onClick:p},r.a.createElement(b.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(Et.a,null)),r.a.createElement("p",null,e.myNickname)):r.a.createElement(dt.a,{onClick:g},"\u0412\u043e\u0439\u0442\u0438"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,{className:t.title,variant:"h6",noWrap:!0},"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0430\u0434\u0430\u0447 (".concat(j,")"),r.a.createElement(gt.a,{title:"(".concat(j,") \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0430\u0434\u0430\u0447")})),r.a.createElement("div",{className:t.grow}),e.isAuth?r.a.createElement("div",{className:t.sectionDesktop},r.a.createElement(mt.a,{className:t.typography__authorizedUserNickname,variant:"body1"},e.myNickname),r.a.createElement(b.a,{edge:"end","aria-label":"account of current user","aria-controls":O,"aria-haspopup":"true",onClick:p,color:"inherit"},r.a.createElement(Et.a,null))):r.a.createElement("div",{className:t.sectionDesktop},r.a.createElement(jt.a,{color:"inherit",onClick:g},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("div",{className:t.sectionMobile},r.a.createElement(b.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(bt.a,null))),k,v)})),St=n(166),wt=n.n(St),It=n(254),yt=n(259),Tt=n(307),_t=n(159),Nt=n.n(_t),Ct=Object(l.a)((function(e){return Object(u.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),xt={setSort:Ve},Dt=Object(M.b)((function(e){return{sort:e.tasks.sort}}),xt)((function(e){var t=Ct();return r.a.createElement("div",null,r.a.createElement(It.a,{className:t.formControl},r.a.createElement(yt.a,{value:null!==e.sort.firstCompleted?!0===e.sort.firstCompleted?"CLOSE_FIRST":"OPEN_FIRST":null!==e.sort.firstNew?!0===e.sort.firstNew?"NEW_FIRST":"OLD_FIRST":"",onChange:function(t){switch(t.target.value){case"CLOSE_FIRST":e.setSort({firstCompleted:!0,firstNew:!1});break;case"OPEN_FIRST":e.setSort({firstCompleted:!1,firstNew:!1});break;case"NEW_FIRST":e.setSort({firstCompleted:null,firstNew:!0});break;case"OLD_FIRST":e.setSort({firstCompleted:null,firstNew:!1});break;default:e.setSort({firstCompleted:null,firstNew:null})}},displayEmpty:!0,className:t.selectEmpty,inputProps:{"aria-label":"Without label"},startAdornment:r.a.createElement(Tt.a,{position:"start"},r.a.createElement(Nt.a,null))},r.a.createElement(dt.a,{value:""},r.a.createElement("em",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430")),r.a.createElement(p.a,null),r.a.createElement(dt.a,{value:"NEW_FIRST"},"\u041e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c"),r.a.createElement(dt.a,{value:"OLD_FIRST"},"\u041e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c"),r.a.createElement(p.a,null),r.a.createElement(dt.a,{value:"OPEN_FIRST"},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"),r.a.createElement(dt.a,{value:"CLOSE_FIRST"},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"))))})),Ft=n(160),At=n.n(Ft),Pt=Object(l.a)((function(e){return Object(u.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),Rt={setFilter:Je},Lt=Object(M.b)((function(e){return{filter:e.tasks.filter}}),Rt)((function(e){var t=Pt();return r.a.createElement("div",null,r.a.createElement(It.a,{className:t.formControl},r.a.createElement(yt.a,{value:!0===e.filter.status?"CLOSE":!1===e.filter.status?"OPEN":"",onChange:function(t){var n=t.target.value;e.setFilter({userIds:void 0,status:"OPEN"!==n&&("CLOSE"===n||null),content:void 0})},displayEmpty:!0,className:t.selectEmpty,inputProps:{"aria-label":"Without label"},startAdornment:r.a.createElement(Tt.a,{position:"start"},r.a.createElement(At.a,null))},r.a.createElement(dt.a,{value:""},r.a.createElement("em",null,"\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443")),r.a.createElement(dt.a,{value:"OPEN"},"\u041d\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"),r.a.createElement(dt.a,{value:"CLOSE"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"))))})),Mt=n(321),Wt=n(309),Ut=Object(l.a)((function(e){return Object(u.a)({root:{width:"100%","& > * + *":{marginTop:e.spacing(3)}}})})),zt={setFilter:Je},Gt=Object(M.b)((function(e){return{users:e.users.users,filter:e.tasks.filter}}),zt)((function(e){var t=Ut(),n=e.filter.userIds?e.filter.userIds.map((function(t){return e.users.filter((function(e){return e.id===t}))[0]})):[];return r.a.createElement("div",{className:t.root},r.a.createElement(Mt.a,{onChange:function(t,n){var a=n.map((function(e){return e.id}));e.setFilter({userIds:a,status:void 0,content:void 0},!0)},disableClearable:!0,multiple:!0,id:"tags-outlined",options:e.users,getOptionLabel:function(e){return e.nickname},value:n,filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(Wt.a,Object.assign({},e,{variant:"standard",label:"",placeholder:"\u0410\u0432\u0442\u043e\u0440\u044b"}))}}))})),Ht=Object(l.a)((function(e){return Object(u.a)({root:{"& > *":{margin:e.spacing(1,0)}}})})),Kt={setFilter:Je},Bt=Object(M.b)((function(e){return{filter:e.tasks.filter}}),Kt)((function(e){var t=Ht();return r.a.createElement("form",{style:{width:"100%"},className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(Wt.a,{value:e.filter.content,onChange:function(t){e.setFilter({userIds:void 0,status:void 0,content:t.currentTarget.value})},id:"standard-basic",label:"\u0418\u0441\u043a\u0430\u0442\u044c \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443: ",fullWidth:!0}))})),Jt=n(162),Vt=n.n(Jt),Zt=n(163),Xt=n.n(Zt),$t=n(164),qt=n.n($t),Yt=n(165),Qt=n.n(Yt),en={setFilter:Je,setSort:Ve},tn=Object(M.b)((function(e){return{}}),en)((function(e){return r.a.createElement(Vt.a,null,e.children,r.a.createElement(Xt.a,null,r.a.createElement(qt.a,{onClick:function(){switch(e.rowNumber){case 1:e.setSort({firstCompleted:null,firstNew:null}),e.setFilter({userIds:void 0,status:null,content:void 0});break;case 2:e.setFilter({userIds:null,status:void 0,content:void 0});break;case 3:e.setFilter({userIds:void 0,status:void 0,content:null})}},edge:"end","aria-label":"delete"},r.a.createElement(Qt.a,null))))})),nn=Object(l.a)((function(e){return Object(u.a)({root:{flexGrow:1}})})),an=function(){var e=nn();return r.a.createElement("div",{className:e.root},r.a.createElement(k.a,{disablePadding:!0},r.a.createElement(tn,{rowNumber:1},r.a.createElement(Dt,null),r.a.createElement(Lt,null)),r.a.createElement(tn,{rowNumber:2},r.a.createElement(Gt,null)),r.a.createElement(tn,{rowNumber:3},r.a.createElement(Bt,null))))},rn=(Object(l.a)((function(e){return Object(u.a)({})})),function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{button:!0,onClick:function(){a(!n)}},r.a.createElement(y.a,null,r.a.createElement(wt.a,null)),r.a.createElement(T.a,{primary:"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u0434\u0430\u0447",primaryTypographyProps:{variant:"body1"}}),n?r.a.createElement(C.a,null):r.a.createElement(D.a,null)),r.a.createElement(_.a,{in:n,timeout:"auto",unmountOnExit:!0},r.a.createElement(k.a,{component:"div",disablePadding:!0},r.a.createElement(an,null))))}),cn=n(311),sn=n(310),on=n(323),ln=n(169),un=n.n(ln),mn=n(49),dn=n(180),fn=function(e,t,n){return function(a){"Enter"!==a.key||a.ctrlKey?"Enter"===a.key&&a.ctrlKey&&t(function(e){var t=e.currentTarget.value,n=e.currentTarget.selectionStart,a=e.currentTarget.selectionEnd;return e.currentTarget.value=t.slice(0,null!==n?n:void 0)+"\n"+t.slice(null!==a?a:void 0,t.length-1),e.currentTarget.selectionStart=n?n+1:t.length-1,e.currentTarget.selectionEnd=n?n+1:t.length-1,e}(a)):/Windows NT/.test(n)&&(e(),a.preventDefault())}},pn=Object(l.a)((function(e){return Object(u.a)({checkbox_cursor_default:{cursor:"default"}})})),En={deleteTask:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Ke(e)),t.next=4,n(Fe("tasks",e));case 4:return t.next=6,n(Pe("tasks",e));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(pe(t.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438"));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},changeTask:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(He(e.id,e.isDone,e.title)),t.next=4,n(Fe("tasks",e.id));case 4:return t.next=6,n(Pe("tasks",e.id));case 6:return t.next=8,n(Ae("tasks",e));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n(pe(t.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438"));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}},hn=Object(M.b)((function(e){return{users:e.users.users,myId:e.auth.id}}),En)((function(e){var t=pn();console.log("task render");var n=function(e,t){return e.filter((function(e){return e.id===t}))[0]},a=e.task,c="checkbox-list-label-".concat(a.id),s=new Date(a.date),i="".concat(s.getDate()<10?"0".concat(s.getDate()):s.getDate(),".").concat(s.getMonth()<9?"0".concat(s.getMonth()+1):s.getMonth()+1,".").concat(s.getFullYear()," ").concat(s.getHours()<10?"0".concat(s.getHours()):s.getHours(),":").concat(s.getMinutes()<10?"0".concat(s.getMinutes()):s.getMinutes());return r.a.createElement(I.a,{role:void 0},r.a.createElement(y.a,{onChange:function(){a.author===e.myId&&e.changeTask(Object(G.a)(Object(G.a)({},a),{},{isDone:!a.isDone,title:a.title}))}},r.a.createElement(on.a,{className:a.author!==e.myId?t.checkbox_cursor_default:"",edge:"start",checked:a.isDone,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":c},color:a.author===e.myId?"secondary":"primary"})),r.a.createElement(T.a,{id:c,primary:a.author===e.myId?r.a.createElement(mn.b,{initialValues:{title:a.title},onSubmit:function(t,n){var r=n.setSubmitting;setTimeout((function(){var n;n=t.title,a.author===e.myId&&e.changeTask(Object(G.a)(Object(G.a)({},a),{},{isDone:a.isDone,title:n})),r(!1)}),0)}},(function(e){var t=e.values,n=e.handleChange,a=e.handleSubmit;return r.a.createElement(mn.a,{onSubmit:a},r.a.createElement(dn.a,{name:"title",type:"title",id:"title",fullWidth:!0,multiline:!0,value:t.title,onChange:n,onBlur:function(){a()},onKeyDown:fn(a,n,navigator.userAgent)}))})):a.title,secondary:"".concat(i," - ").concat(n(e.users,a.author)&&n(e.users,a.author).nickname)}),a.author===e.myId&&r.a.createElement(sn.a,null,r.a.createElement(b.a,{onClick:function(){e.deleteTask(a.id)},edge:"end","aria-label":"comments"},r.a.createElement(un.a,null))))})),bn=n(170),gn=n.n(bn),jn=n(260),On=Object(l.a)((function(e){return Object(u.a)({textFieldWrapper_marginRight_20px:{marginRight:"20px"}})})),vn={newTask:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Be(e)),t.next=4,n(Ae("tasks",e));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),n(pe(t.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438"));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},kn=Object(M.b)((function(e){return{idCounter:e.tasks.idCounter,selectedProjectId:e.projects.selectedProjectId,myId:e.auth.id}}),vn)((function(e){var t=On();return r.a.createElement(mn.b,{initialValues:{title:""},onSubmit:function(t,n){var a=n.setSubmitting;setTimeout((function(){var n,r,c,s,i,o;null!==e.selectedProjectId&&null!==e.myId&&(n=e.idCounter,r=e.selectedProjectId,c=e.myId,s=Date.now(),i=t.title,o=!1,e.newTask({id:n,project:r,author:c,date:s,title:i,isDone:o})),t.title="",a(!1)}),0)}},(function(e){var n=e.values,a=e.handleChange,c=e.handleSubmit;return r.a.createElement(mn.a,{onSubmit:c},r.a.createElement(I.a,{role:void 0},r.a.createElement(T.a,{primary:r.a.createElement("div",{className:t.textFieldWrapper_marginRight_20px},r.a.createElement(It.a,{variant:"outlined",fullWidth:!0},r.a.createElement(jn.a,{name:"title",type:"title",id:"title",multiline:!0,placeholder:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430...",value:n.title,onChange:a,onKeyDown:fn(c,a,navigator.userAgent)})))}),r.a.createElement(sn.a,null,r.a.createElement(b.a,{onClick:function(){c()},edge:"end","aria-label":"comments"},r.a.createElement(gn.a,{fontSize:"large"})))))}))})),Sn=Object(l.a)((function(e){return Object(u.a)({root:{width:"100%",maxWidth:600,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column"},progress:{alignSelf:"center",margin:e.spacing(2)},itemSecondaryText:{display:"flex",justifyContent:"space-between"}})})),wn={setFetching:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(We(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getTasks:function(e,t){return function(){var n=Object(z.a)(U.a.mark((function n(a){var r;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Y(e,t);case 3:r=n.sent,a(Me(r)),a(Ue({userIds:[],status:null,content:""})),a(We(!1)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a(pe(n.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u0434\u0430\u0447"));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},setCountOfShownTasks:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Ge(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},In=Object(M.b)((function(e){return{isFetching:e.tasks.isFetching,isAuth:e.auth.isAuth,usersIsFetching:e.users.isFetching,selectedProjectId:e.projects.selectedProjectId,tasks:e.tasks.tasks,filter:e.tasks.filter,sort:e.tasks.sort,tasksOnClient:e.clientSideDb.clientSideData.tasks}}),wn)((function(e){Object(a.useEffect)((function(){e.usersIsFetching?e.setFetching(!0):null!==e.selectedProjectId&&e.getTasks([e.selectedProjectId],null)}),[e.usersIsFetching]);var t=Sn(),n=e.tasks.filter((function(t){return!e.tasksOnClient.deleted.filter((function(e){return e===t.id})).length})).concat(e.tasksOnClient.items.filter((function(t){return t.project===e.selectedProjectId}))).filter((function(t){var n=null===e.filter.status||t.isDone===e.filter.status,a=!(e.filter.userIds&&e.filter.userIds.length>0)||e.filter.userIds.filter((function(e){return e===t.author})).length>0,r=!e.filter.content||t.title.match(new RegExp(e.filter.content,"gi"));return n&&a&&r}));return n=n.sort((function(t,n){var a=function(e,t,n){return null!==n?!0===n?e.isDone===t.isDone?0:e.isDone>t.isDone?-1:1:e.isDone===t.isDone?0:e.isDone<t.isDone?-1:1:0}(t,n,e.sort.firstCompleted),r=function(e,t,n){var a=e.date-t.date;return!0===n?-1*a:a}(t,n,e.sort.firstNew);return 0!==a?a:r})),Object(a.useEffect)((function(){e.setCountOfShownTasks(n.length)}),[n]),r.a.createElement(cn.a,{maxWidth:"sm"},r.a.createElement(k.a,{className:t.root},e.isFetching&&e.isAuth?r.a.createElement(tt.a,{className:t.progress,size:50}):e.isAuth&&r.a.createElement("div",null,n.map((function(e){return r.a.createElement(hn,{key:e.id,task:e})})),r.a.createElement(kn,null))))})),yn=n(176),Tn=n(312),_n=n(313),Nn=n(314),Cn=n(315),xn=n(316),Dn=n(257),Fn=n(261),An=n(255),Pn={showLoginForm:le,login:oe,setLoginErrorMessage:function(e){return function(){var t=Object(z.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ie(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Rn=Object(M.b)((function(e){return{loginErrorMessage:e.auth.loginErrorMessage}}),Pn)((function(e){var t=function(){e.showLoginForm(!1)};return r.a.createElement("div",null,r.a.createElement(Tn.a,{open:!0,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(mn.b,{initialValues:{email:"",password:""},validate:function(e){var t,n={};return e.email?(t=e.email,/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)||(n.email="\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0430\u0434\u0440\u0435\u0441\u0430")):n.email="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",e.password||(n.password="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),n},onSubmit:function(t,n){var a=n.setSubmitting;setTimeout(Object(z.a)(U.a.mark((function n(){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setLoginErrorMessage(null),n.next=3,e.login(t.email,t.password);case 3:a(!1);case 4:case"end":return n.stop()}}),n)}))),0)}},(function(n){var a=n.values,c=n.errors,s=n.touched,i=n.handleChange,o=n.handleBlur,l=n.handleSubmit,u=n.isSubmitting;return r.a.createElement(mn.a,{onSubmit:l},r.a.createElement(_n.a,{id:"form-dialog-title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(Nn.a,null,r.a.createElement(Cn.a,null,r.a.createElement(mt.a,{variant:"caption"},"test user data. email: 'testuser@email.com' password: 'testuser_pass'")),r.a.createElement(It.a,{fullWidth:!0,error:!!c.email&&s.email},r.a.createElement(Fn.a,{htmlFor:"email"},"Email"),r.a.createElement(An.a,{name:"email",type:"email",id:"email",value:a.email,onChange:i,onBlur:o}),r.a.createElement(Dn.a,{id:"email-error"},c.email&&s.email&&c.email)),r.a.createElement("br",null),r.a.createElement(It.a,{fullWidth:!0,error:!!c.password&&s.password},r.a.createElement(Fn.a,{htmlFor:"password"},"Password"),r.a.createElement(An.a,{name:"password",type:"password",id:"password",value:a.password,onChange:i,onBlur:o}),r.a.createElement(Dn.a,{id:"password-error"},c.email&&s.email&&c.email))),e.loginErrorMessage&&r.a.createElement(Nn.a,null,r.a.createElement(Dn.a,{id:"my-helper-text",error:!0},e.loginErrorMessage)),r.a.createElement(xn.a,null,r.a.createElement(jt.a,{onClick:function(){return l()},color:"primary",disabled:u},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(jt.a,{onClick:t,color:"primary",disabled:u},"\u041e\u0442\u043c\u0435\u043d\u0430")))}))))})),Ln=n(104),Mn=Object(l.a)((function(e){return Object(u.a)({root:{display:"flex"},drawer:Object(o.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(o.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(o.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),Wn={appInitializing:function(){return function(){var e=Object(z.a)(U.a.mark((function e(t){var n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=ae.a.get("email"),a=ae.a.get("password"),!n||!a){e.next=8;break}return e.next=6,t(oe(n,a));case 6:e.next=9;break;case 8:t(le(!0));case 9:t(de(!0)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(pe(e.t0.message+" \u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}},Un=Object(M.b)((function(e){return{isInitialized:e.app.isInitialized,isAuth:e.auth.isAuth,loginFormShown:e.auth.loginFormShown,errors:e.app.errors}}),Wn)((function(e){var t=Object(Ln.b)().enqueueSnackbar;Object(a.useEffect)((function(){e.appInitializing()}),[]),Object(a.useEffect)((function(){e.errors.length>0&&t(e.errors[e.errors.length-1],{variant:"error"})}),[e.errors]);var n=Mn(),c=Object(m.a)(),s=r.a.useState(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=function(){u(!l)},v=r.a.createElement("div",null,r.a.createElement("div",{className:n.toolbar}),r.a.createElement(p.a,null),r.a.createElement(ut,null));return r.a.createElement("div",{className:n.root},r.a.createElement(yn.a,{className:n.backdrop,open:!e.isInitialized},r.a.createElement(L.a,{color:"inherit"})),e.loginFormShown&&r.a.createElement(Rn,null),r.a.createElement(f.a,null),r.a.createElement(d.a,{position:"fixed",className:n.appBar},r.a.createElement(g.a,null,r.a.createElement(b.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:j,className:n.menuButton},r.a.createElement(O.a,null)),r.a.createElement(kt,null))),r.a.createElement("nav",{className:n.drawer,"aria-label":"menu folders"},r.a.createElement(h.a,{smUp:!0,implementation:"css"},r.a.createElement(E.a,{variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:l,onClose:j,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},v)),r.a.createElement(h.a,{xsDown:!0,implementation:"css"},r.a.createElement(E.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},v))),e.isAuth&&r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),r.a.createElement(rn,null),r.a.createElement(In,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var zn=n(57),Gn=n(172),Hn=Object(zn.c)({api:Re,auth:ue,projects:Oe,users:_e,tasks:Ze,app:Ee,clientSideDb:Re}),Kn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||zn.d,Bn=Object(zn.e)(Hn,Kn(Object(zn.a)(Gn.a)));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M.a,{store:Bn},r.a.createElement(Ln.a,{maxSnack:3},r.a.createElement(Un,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[194,1,2]]]);
//# sourceMappingURL=main.6f3af38c.chunk.js.map