(this["webpackJsonp2020-06-03_template_material-ui_task-manager"]=this["webpackJsonp2020-06-03_template_material-ui_task-manager"]||[]).push([[0],{190:function(e,t,n){e.exports=n(244)},195:function(e,t,n){},196:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"authAPI",(function(){return p})),n.d(a,"usersAPI",(function(){return h})),n.d(a,"projectsAPI",(function(){return E})),n.d(a,"tasksAPI",(function(){return b}));var r=n(0),c=n.n(r),s=n(14),i=n.n(s),o=(n(195),n(34)),l=n(28),u=(n(196),n(143)),d=n.n(u),m=function(e,t){return t?t.map((function(t){return"".concat(e,"=").concat(t,"&")})).toString().replace(/,/g,""):""},f=d.a.create({withCredentials:!0,baseURL:"https://my-json-server.typicode.com/genekomarov/task-manager_mui",headers:{}}),p={auth:function(e,t){return f.get("/authData?email=".concat(e,"&password=").concat(t)).then((function(e){return e.data}))}},h={getUsersByIds:function(e){return e.length?f.get("/users?".concat(m("id",e))).then((function(e){return e.data})):[]},getUserIdsByProjectIds:function(e){return e.length?f.get("/projects-to-users?".concat(m("projectId",e))).then((function(e){return e.data})):[]},addNewUser:function(){return console.error("method 'addNewUser' is not implemented")},changeUser:function(){return console.error("method 'changeUser' is not implemented")},deleteUser:function(){return console.error("method 'deleteUser' is not implemented")}},E={getProjectsByIds:function(e){return e.length?f.get("/projects?".concat(m("id",e))).then((function(e){return e.data})):[]},getProjectIdsByUserIds:function(e){return e.length?f.get("/projects-to-users?".concat(m("userId",e))).then((function(e){return e.data})):[]},addNewProject:function(){return console.error("method 'addNewProject' is not implemented")},changeProject:function(){return console.error("method 'changeProject' is not implemented")},deleteProject:function(){return console.error("method 'deleteProject' is not implemented")}},b={getTasksByProjectOrUserIds:function(e,t){return e||t?f.get("/tasks?".concat(m("project",e)).concat(m("author",t))).then((function(e){return e.data})):[]},addNewTask:function(e){return f.post("/tasks",e).then((function(e){return e.data}))},changeTask:function(e,t,n){return f.patch("/tasks/".concat(e),{title:t,isDone:n}).then((function(e){return e.data}))},deleteTask:function(e){return f.delete("/tasks/".concat(e)).then((function(e){return e.data}))}},g=n(57),j=n(144),O=n(8),v=n.n(O),k=n(15),w=n(46),I=n(6),S={clientSideData:{users:{items:[],deleted:[]},authData:{items:[],deleted:[]},projectsToUsers:{items:[],deleted:[]},projects:{items:[],deleted:[]},tasks:{items:[],deleted:[]}}},y=function(e,t){return{type:"ADD_ID_TO_DELETED",tableName:e,itemId:t}},T=function(e,t){return function(){var n=Object(k.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(y(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ID_TO_DELETED":return Object(I.a)(Object(I.a)({},e),{},{clientSideData:Object(I.a)(Object(I.a)({},e.clientSideData),{},Object(l.a)({},t.tableName,Object(I.a)(Object(I.a)({},e.clientSideData[t.tableName]),{},{deleted:[].concat(Object(w.a)(e.clientSideData[t.tableName].deleted),[t.itemId])})))});case"ADD_NEW_ITEM":return Object(I.a)(Object(I.a)({},e),{},{clientSideData:Object(I.a)(Object(I.a)({},e.clientSideData),{},Object(l.a)({},t.tableName,Object(I.a)(Object(I.a)({},e.clientSideData[t.tableName]),{},{items:[].concat(Object(w.a)(e.clientSideData[t.tableName].items),[t.item])})))});case"DELETE_ITEM":return Object(I.a)(Object(I.a)({},e),{},{clientSideData:Object(I.a)(Object(I.a)({},e.clientSideData),{},Object(l.a)({},t.tableName,Object(I.a)(Object(I.a)({},e.clientSideData[t.tableName]),{},{items:Object(w.a)(e.clientSideData[t.tableName].items).filter((function(e){return e.id!==t.itemId}))})))});default:return e}},_=n(145),F=function e(){Object(_.a)(this,e),this.message=void 0,this.message="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c"},C=n(54),x=n.n(C),D={id:null,email:null,nickname:null,isAuth:!1,loginFormShown:!1,loginErrorMessage:null},P=function(e,t,n,a){return{type:"auth/SET_USER_DATA",id:e,email:t,nickname:n,isAuth:a}},A=function(e){return{type:"auth/SHOW_LOGIN_FORM",loginFormShown:e}},U=function(e){return{type:"auth/SET_LOGIN_ERROR_MESSAGE",loginErrorMessage:e}},R=function(e,t){return function(){var n=Object(k.a)(v.a.mark((function n(a){var r,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.auth(e,t);case 3:if(0!==(r=n.sent).length){n.next=6;break}throw new F;case 6:return n.next=8,h.getUsersByIds([r[0].id]);case 8:if(c=n.sent,0!==r.length){n.next=11;break}throw new F;case 11:a(P(r[0].id,r[0].email,c[0].nickname,!0)),a(A(!1)),a(U(null)),x.a.set("email",e),x.a.set("password",t),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),a(U("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b email \u0438\u043b\u0438 password!"));case 21:case"end":return n.stop()}}),n,null,[[0,18]])})));return function(e){return n.apply(this,arguments)}}()},L=function(){return function(){var e=Object(k.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.a.remove("email"),x.a.remove("password"),t(P(null,null,null,!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(A(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(I.a)(Object(I.a)({},e),{},{id:t.id,email:t.email,nickname:t.nickname,isAuth:t.isAuth});case"auth/SHOW_LOGIN_FORM":return Object(I.a)(Object(I.a)({},e),{},{loginFormShown:t.loginFormShown});case"auth/SET_LOGIN_ERROR_MESSAGE":return Object(I.a)(Object(I.a)({},e),{},{loginErrorMessage:t.loginErrorMessage});default:return e}},z={projects:[],isFetching:!1,selectedProjectId:null},B=function(e){return{type:"projects/SET_PROJECTS",projects:e,selectedProjectId:e.length>0?e[0].id:null}},G=function(e){return{type:"projects/SET_FETCHING",isFetching:e}},H=function(e){return{type:"projects/SET_SELECTED_PROJECT_ID",selectedProjectId:e}},K=function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){var a,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.getProjectIdsByUserIds(e);case 3:return a=t.sent,t.next=6,E.getProjectsByIds(a.map((function(e){return e.projectId})));case 6:r=t.sent,n(B(r)),n(G(!1)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"projects/SET_PROJECTS":return Object(I.a)(Object(I.a)({},e),{},{projects:t.projects,selectedProjectId:t.selectedProjectId});case"projects/SET_FETCHING":return Object(I.a)(Object(I.a)({},e),{},{isFetching:t.isFetching});case"projects/SET_SELECTED_PROJECT_ID":return Object(I.a)(Object(I.a)({},e),{},{selectedProjectId:t.selectedProjectId});default:return e}},Z={users:[],isFetching:!1,selectedUserId:null},V=function(e){return{type:"users/SET_USERS",users:e}},X=function(e){return{type:"users/SET_FETCHING",isFetching:e}},$=function(e){return{type:"users/SET_SELECTED_USER_ID",selectedUserId:e}},Y=function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){var a,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(X(!0)),t.next=4,h.getUserIdsByProjectIds(e);case 4:return a=t.sent,t.next=7,h.getUsersByIds(a.map((function(e){return e.userId})));case 7:r=t.sent,n(V(r)),n(X(!1)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),alert(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n($(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/SET_USERS":return Object(I.a)(Object(I.a)({},e),{},{users:t.users});case"users/SET_FETCHING":return Object(I.a)(Object(I.a)({},e),{},{isFetching:t.isFetching});case"users/SET_SELECTED_USER_ID":return Object(I.a)(Object(I.a)({},e),{},{selectedUserId:t.selectedUserId});default:return e}},ee={tasks:[],isFetching:!1,filter:{userIds:null,status:null,content:null},sort:{firstCompleted:null,firstNew:null},countOfShownTasks:0},te=function(e){return{type:"tasks/SET_TASKS",tasks:e}},ne=function(e){return{type:"tasks/SET_FETCHING",isFetching:e}},ae=function(e){return{type:"tasks/SET_FILTER",filter:e}},re=function(e){return{type:"tasks/SET_SORT",sort:e}},ce=function(e){return{type:"tasks/SET_COUNT_OF_SHOWN_TASKS",countOfShownTasks:e}},se=function(e,t,n){return{type:"tasks/CHANGE_TASK",taskId:e,status:t,title:n}},ie=function(e){return{type:"tasks/DELETE_TASK",taskId:e}},oe=function(e,t){return function(){var n=Object(k.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.getTasksByProjectOrUserIds(e,t);case 3:r=n.sent,a(te(r)),a(ae({userIds:[],status:null,content:""})),a(ne(!1)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),alert(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(k.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&a(ae({userIds:void 0!==e.userIds?null:void 0,status:void 0!==e.status?null:void 0,content:void 0!==e.content?null:void 0})),a(ae(e));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(re(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tasks/SET_TASKS":return Object(I.a)(Object(I.a)({},e),{},{tasks:t.tasks});case"tasks/SET_FETCHING":return Object(I.a)(Object(I.a)({},e),{},{isFetching:t.isFetching});case"tasks/SET_FILTER":return Object(I.a)(Object(I.a)({},e),{},{filter:Object(I.a)(Object(I.a)({},e.filter),{},{userIds:void 0===t.filter.userIds?e.filter.userIds:null===t.filter.userIds?null:e.filter.userIds?[].concat(Object(w.a)(e.filter.userIds),Object(w.a)(t.filter.userIds)):Object(w.a)(t.filter.userIds),status:void 0===t.filter.status?e.filter.status:t.filter.status,content:void 0===t.filter.content?e.filter.content:t.filter.content})});case"tasks/SET_SORT":return Object(I.a)(Object(I.a)({},e),{},{sort:Object(I.a)(Object(I.a)({},e.sort),{},{firstCompleted:void 0===t.sort.firstCompleted?e.sort.firstCompleted:t.sort.firstCompleted,firstNew:void 0===t.sort.firstNew?e.sort.firstNew:t.sort.firstNew})});case"tasks/SET_COUNT_OF_SHOWN_TASKS":return Object(I.a)(Object(I.a)({},e),{},{countOfShownTasks:t.countOfShownTasks});case"tasks/DELETE_TASK":return Object(I.a)(Object(I.a)({},e),{},{tasks:Object(w.a)(e.tasks.filter((function(e){return e.id!==t.taskId})))});case"tasks/CHANGE_TASK":var n=e.tasks.findIndex((function(e){return e.id===t.taskId}));return Object(I.a)(Object(I.a)({},e),{},{tasks:[].concat(Object(w.a)(e.tasks.filter((function(e){return e.id!==t.taskId}))),[Object(I.a)(Object(I.a)({},e.tasks[n]),{},{isDone:!t.status,title:t.title})])});default:return e}},me={isInitialized:!1},fe=function(e){return{type:"app/SET_INITIALIZED",isInitialized:e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED":return Object(I.a)(Object(I.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},he=Object(g.c)({api:N,auth:W,projects:J,users:Q,tasks:de,app:pe,clientSideDb:N}),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||g.d,be=Object(g.e)(he,Ee(Object(g.a)(j.a))),ge=1e3,je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return e!==ge&&(ge=e),ge++},Oe=n(295),ve=n(297),ke=n(17),we=n(318),Ie=n(317),Se=n(308),ye=n(323),Te=n(321),Ne=n(250),_e=n(319),Fe=n(172),Ce=n.n(Fe),xe=n(303),De=n(302),Pe=n(116),Ae=n.n(Pe),Ue=n(247),Re=n(298),Le=n(299),Me=n(301),We=n(64),ze=n.n(We),Be=n(65),Ge=n.n(Be),He=n(150),Ke=n.n(He),Je=n(152),Ze=n.n(Je),Ve=n(300),Xe=n(16),$e=n(151),Ye=n.n($e),qe=Object(Oe.a)((function(e){return Object(ve.a)({root:{display:"flex",flexDirection:"column"},progress:{alignSelf:"center",margin:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}})})),Qe={getProjects:K,setProjects:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(B(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setSelectedProjectId:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(H(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setSelectedUserId:q,setFilter:le,setSort:ue},et=Object(Xe.b)((function(e){return{isFetching:e.projects.isFetching,isAuth:e.auth.isAuth,projects:e.projects.projects,myId:e.auth.id,selectedProjectId:e.projects.selectedProjectId,isInitialized:e.app.isInitialized}}),Qe)((function(e){Object(r.useEffect)((function(){null!==e.myId?e.getProjects([e.myId]):e.setProjects([])}),[e.myId]);var t=qe(),n=c.a.useState(!0),a=Object(o.a)(n,2),s=a[0],i=a[1];return c.a.createElement("div",{className:t.root},c.a.createElement(Ue.a,{button:!0,onClick:function(){i(!s)}},c.a.createElement(Re.a,null,c.a.createElement(Ke.a,null)),c.a.createElement(Le.a,{primary:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",primaryTypographyProps:{variant:"body1"}}),s?c.a.createElement(ze.a,null):c.a.createElement(Ge.a,null)),e.isFetching&&e.isAuth?c.a.createElement(Ve.a,{className:t.progress}):c.a.createElement(Me.a,{in:s,timeout:"auto",unmountOnExit:!0},e.isAuth&&e.projects.map((function(n){return c.a.createElement(De.a,{component:"div",disablePadding:!0,key:n.id},c.a.createElement(Ue.a,{button:!0,className:t.nested,onClick:function(){return t=n.id,e.setSelectedProjectId(t),e.setFilter({userIds:null,status:null,content:null}),e.setSort({firstCompleted:null,firstNew:null}),void e.setSelectedUserId(null);var t}},c.a.createElement(Re.a,null,n.id===e.selectedProjectId?c.a.createElement(Ye.a,null):c.a.createElement(Ze.a,null)),c.a.createElement(Le.a,{primary:n.projectName})))}))))})),tt=n(153),nt=n.n(tt),at=n(97),rt=n.n(at),ct=n(155),st=n.n(ct),it=n(154),ot=n.n(it),lt=Object(Oe.a)((function(e){return Object(ve.a)({root:{display:"flex",flexDirection:"column"},progress:{alignSelf:"center",margin:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}})})),ut={setFetching:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(X(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsers:Y,setSelectedUserId:q,setFilter:le},dt=Object(Xe.b)((function(e){return{isFetching:e.users.isFetching,isAuth:e.auth.isAuth,projectsIsFetching:e.projects.isFetching,selectedProjectId:e.projects.selectedProjectId,users:e.users.users,selectedUserId:e.users.selectedUserId,tasks:e.tasks.tasks}}),ut)((function(e){Object(r.useEffect)((function(){e.projectsIsFetching&&e.setFetching(!0)}),[e.projectsIsFetching]),Object(r.useEffect)((function(){null!==e.selectedProjectId&&e.getUsers([e.selectedProjectId])}),[e.selectedProjectId]);var t=lt(),n=c.a.useState(!0),a=Object(o.a)(n,2),s=a[0],i=a[1];return c.a.createElement("div",{className:t.root},c.a.createElement(Ue.a,{button:!0,onClick:function(){i(!s)}},c.a.createElement(Re.a,null,c.a.createElement(nt.a,null)),c.a.createElement(Le.a,{primary:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430",primaryTypographyProps:{variant:"body1"}}),s?c.a.createElement(ze.a,null):c.a.createElement(Ge.a,null)),e.isFetching&&e.isAuth?c.a.createElement(rt.a,{className:t.progress}):c.a.createElement(Me.a,{in:s,timeout:"auto",unmountOnExit:!0},e.isAuth&&e.users.map((function(n){return c.a.createElement(De.a,{component:"div",disablePadding:!0,key:n.id},c.a.createElement(Ue.a,{button:!0,className:t.nested,onClick:function(){return t=n.id,e.setSelectedUserId(t),void e.setFilter({userIds:[t],status:void 0,content:void 0},!0);var t}},c.a.createElement(Re.a,null,n.id===e.selectedUserId?c.a.createElement(ot.a,null):c.a.createElement(st.a,null)),c.a.createElement(Le.a,{primary:"".concat(n.nickname," (").concat(e.tasks.filter((function(e){return e.author===n.id})).length,")")})))}))))})),mt=Object(Oe.a)((function(e){return Object(ve.a)({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},verticalSpacing:{display:"flex",alignItems:"center",padding:e.spacing(2,1),justifyContent:"flex-end"}})})),ft=function(){var e=mt();return c.a.createElement(De.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:c.a.createElement(xe.a,{component:"div",id:"nested-list-subheader"},"\u041c\u0435\u043d\u044e"),className:e.root},c.a.createElement(Ae.a,null),c.a.createElement(et,null),c.a.createElement("div",{className:e.verticalSpacing}),c.a.createElement(dt,null),c.a.createElement(Ae.a,null))},pt=n(59),ht=n(305),Et=n(173),bt=n(117),gt=n.n(bt),jt=n(159),Ot=n.n(jt),vt=n(156),kt=n(306),wt=Object(Oe.a)((function(e){return Object(ve.a)({grow:{flexGrow:1},title:Object(l.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(l.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(l.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),typography__authorizedUserNickname:{marginRight:e.spacing(2),alignSelf:"center"}})})),It={logout:L,showLoginForm:M},St=Object(Xe.b)((function(e){return{countOfShownTasks:e.tasks.countOfShownTasks,myNickname:e.auth.nickname,isAuth:e.auth.isAuth}}),It)((function(e){var t=wt(),n=c.a.useState(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=c.a.useState(null),l=Object(o.a)(i,2),u=l[0],d=l[1],m=Boolean(r),f=Boolean(u),p=function(e){s(e.currentTarget)},h=function(){d(null)},E=function(){s(null),h()},b=function(){e.showLoginForm(!0)},g=e.isAuth?e.countOfShownTasks:0,j="primary-search-account-menu",O=c.a.createElement(Et.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},id:j,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:E},c.a.createElement(ht.a,{onClick:function(){E(),e.logout()}},"\u0412\u044b\u0439\u0442\u0438")),v=c.a.createElement(Et.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:h},e.isAuth?c.a.createElement(ht.a,{onClick:p},c.a.createElement(Ne.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},c.a.createElement(gt.a,null)),c.a.createElement("p",null,e.myNickname)):c.a.createElement(ht.a,{onClick:b},"\u0412\u043e\u0439\u0442\u0438"));return c.a.createElement(c.a.Fragment,null,c.a.createElement(pt.a,{className:t.title,variant:"h6",noWrap:!0},"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0430\u0434\u0430\u0447 (".concat(g,")"),c.a.createElement(vt.a,{title:"(".concat(g,") \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0430\u0434\u0430\u0447")})),c.a.createElement("div",{className:t.grow}),e.isAuth?c.a.createElement("div",{className:t.sectionDesktop},c.a.createElement(pt.a,{className:t.typography__authorizedUserNickname,variant:"body1"},e.myNickname),c.a.createElement(Ne.a,{edge:"end","aria-label":"account of current user","aria-controls":j,"aria-haspopup":"true",onClick:p,color:"inherit"},c.a.createElement(gt.a,null))):c.a.createElement("div",{className:t.sectionDesktop},c.a.createElement(kt.a,{color:"inherit",onClick:b},"\u0412\u043e\u0439\u0442\u0438")),c.a.createElement("div",{className:t.sectionMobile},c.a.createElement(Ne.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit"},c.a.createElement(Ot.a,null))),v,O)})),yt=n(168),Tt=n.n(yt),Nt=n(251),_t=n(256),Ft=n(307),Ct=n(160),xt=n.n(Ct),Dt=Object(Oe.a)((function(e){return Object(ve.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),Pt={setSort:ue},At=Object(Xe.b)((function(e){return{sort:e.tasks.sort}}),Pt)((function(e){var t=Dt();return c.a.createElement("div",null,c.a.createElement(Nt.a,{className:t.formControl},c.a.createElement(_t.a,{value:null!==e.sort.firstCompleted?!0===e.sort.firstCompleted?"CLOSE_FIRST":"OPEN_FIRST":null!==e.sort.firstNew?!0===e.sort.firstNew?"NEW_FIRST":"OLD_FIRST":"",onChange:function(t){switch(t.target.value){case"CLOSE_FIRST":e.setSort({firstCompleted:!0,firstNew:!1});break;case"OPEN_FIRST":e.setSort({firstCompleted:!1,firstNew:!1});break;case"NEW_FIRST":e.setSort({firstCompleted:null,firstNew:!0});break;case"OLD_FIRST":e.setSort({firstCompleted:null,firstNew:!1});break;default:e.setSort({firstCompleted:null,firstNew:null})}},displayEmpty:!0,className:t.selectEmpty,inputProps:{"aria-label":"Without label"},startAdornment:c.a.createElement(Ft.a,{position:"start"},c.a.createElement(xt.a,null))},c.a.createElement(ht.a,{value:""},c.a.createElement("em",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430")),c.a.createElement(Se.a,null),c.a.createElement(ht.a,{value:"NEW_FIRST"},"\u041e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c"),c.a.createElement(ht.a,{value:"OLD_FIRST"},"\u041e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c"),c.a.createElement(Se.a,null),c.a.createElement(ht.a,{value:"OPEN_FIRST"},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"),c.a.createElement(ht.a,{value:"CLOSE_FIRST"},"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"))))})),Ut=n(161),Rt=n.n(Ut),Lt=Object(Oe.a)((function(e){return Object(ve.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),Mt={setFilter:le},Wt=Object(Xe.b)((function(e){return{filter:e.tasks.filter}}),Mt)((function(e){var t=Lt();return c.a.createElement("div",null,c.a.createElement(Nt.a,{className:t.formControl},c.a.createElement(_t.a,{value:!0===e.filter.status?"CLOSE":!1===e.filter.status?"OPEN":"",onChange:function(t){var n=t.target.value;e.setFilter({userIds:void 0,status:"OPEN"!==n&&("CLOSE"===n||null),content:void 0})},displayEmpty:!0,className:t.selectEmpty,inputProps:{"aria-label":"Without label"},startAdornment:c.a.createElement(Ft.a,{position:"start"},c.a.createElement(Rt.a,null))},c.a.createElement(ht.a,{value:""},c.a.createElement("em",null,"\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443")),c.a.createElement(ht.a,{value:"OPEN"},"\u041d\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"),c.a.createElement(ht.a,{value:"CLOSE"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"))))})),zt=n(320),Bt=n(309),Gt=Object(Oe.a)((function(e){return Object(ve.a)({root:{width:"100%","& > * + *":{marginTop:e.spacing(3)}}})})),Ht={setFilter:le},Kt=Object(Xe.b)((function(e){return{users:e.users.users,filter:e.tasks.filter}}),Ht)((function(e){var t=Gt(),n=e.filter.userIds?e.filter.userIds.map((function(t){return e.users.filter((function(e){return e.id===t}))[0]})):[];return c.a.createElement("div",{className:t.root},c.a.createElement(zt.a,{onChange:function(t,n){var a=n.map((function(e){return e.id}));e.setFilter({userIds:a,status:void 0,content:void 0},!0)},disableClearable:!0,multiple:!0,id:"tags-outlined",options:e.users,getOptionLabel:function(e){return e.nickname},value:n,filterSelectedOptions:!0,renderInput:function(e){return c.a.createElement(Bt.a,Object.assign({},e,{variant:"standard",label:"",placeholder:"\u0410\u0432\u0442\u043e\u0440\u044b"}))}}))})),Jt=Object(Oe.a)((function(e){return Object(ve.a)({root:{"& > *":{margin:e.spacing(1,0)}}})})),Zt={setFilter:le},Vt=Object(Xe.b)((function(e){return{filter:e.tasks.filter}}),Zt)((function(e){var t=Jt();return c.a.createElement("form",{style:{width:"100%"},className:t.root,noValidate:!0,autoComplete:"off"},c.a.createElement(Bt.a,{value:e.filter.content,onChange:function(t){e.setFilter({userIds:void 0,status:void 0,content:t.currentTarget.value})},id:"standard-basic",label:"\u0418\u0441\u043a\u0430\u0442\u044c \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443: ",fullWidth:!0}))})),Xt=n(164),$t=n.n(Xt),Yt=n(165),qt=n.n(Yt),Qt=n(166),en=n.n(Qt),tn=n(167),nn=n.n(tn),an={setFilter:le,setSort:ue},rn=Object(Xe.b)((function(e){return{}}),an)((function(e){return c.a.createElement($t.a,null,e.children,c.a.createElement(qt.a,null,c.a.createElement(en.a,{onClick:function(){switch(e.rowNumber){case 1:e.setSort({firstCompleted:null,firstNew:null}),e.setFilter({userIds:void 0,status:null,content:void 0});break;case 2:e.setFilter({userIds:null,status:void 0,content:void 0});break;case 3:e.setFilter({userIds:void 0,status:void 0,content:null})}},edge:"end","aria-label":"delete"},c.a.createElement(nn.a,null))))})),cn=Object(Oe.a)((function(e){return Object(ve.a)({root:{flexGrow:1}})})),sn=function(){var e=cn();return c.a.createElement("div",{className:e.root},c.a.createElement(De.a,{disablePadding:!0},c.a.createElement(rn,{rowNumber:1},c.a.createElement(At,null),c.a.createElement(Wt,null)),c.a.createElement(rn,{rowNumber:2},c.a.createElement(Kt,null)),c.a.createElement(rn,{rowNumber:3},c.a.createElement(Vt,null))))},on=(Object(Oe.a)((function(e){return Object(ve.a)({})})),function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ue.a,{button:!0,onClick:function(){a(!n)}},c.a.createElement(Re.a,null,c.a.createElement(Tt.a,null)),c.a.createElement(Le.a,{primary:"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u0434\u0430\u0447",primaryTypographyProps:{variant:"body1"}}),n?c.a.createElement(ze.a,null):c.a.createElement(Ge.a,null)),c.a.createElement(Me.a,{in:n,timeout:"auto",unmountOnExit:!0},c.a.createElement(De.a,{component:"div",disablePadding:!0},c.a.createElement(sn,null))))}),ln=n(311),un=n(310),dn=n(322),mn=n(169),fn=n.n(mn),pn={deleteTask:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,b.deleteTask(e);case 4:t.sent,n(ie(e)),n(T("tasks",e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},changeTask:function(e,t,n){return function(){var a=Object(k.a)(v.a.mark((function a(r){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,a.next=4,b.changeTask(e,n,t);case 4:a.sent,r(se(e,t,n)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),alert(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}},hn=Object(Xe.b)((function(e){return{users:e.users.users,tasks:e.tasks.tasks,myId:e.auth.id}}),pn)((function(e){var t,n,a=function(e,t){return e.filter((function(e){return e.id===t}))[0]},r=(t=e.tasks,n=e.taskId,t.filter((function(e){return e.id===n}))[0]),s="checkbox-list-label-".concat(r.id),i=new Date(r.date),o="".concat(i.getDate()<10?"0".concat(i.getDate()):i.getDate(),".").concat(i.getMonth()<9?"0".concat(i.getMonth()+1):i.getMonth()+1,".").concat(i.getFullYear()," ").concat(i.getHours()<10?"0".concat(i.getHours()):i.getHours(),":").concat(i.getMinutes()<10?"0".concat(i.getMinutes()):i.getMinutes());return c.a.createElement(Ue.a,{role:void 0},c.a.createElement(Re.a,{onChange:function(){e.changeTask(r.id,r.isDone,r.title)}},c.a.createElement(dn.a,{edge:"start",checked:r.isDone,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":s}})),c.a.createElement(Le.a,{id:s,primary:r.title,secondary:"".concat(o," - ").concat(a(e.users,r.author)&&a(e.users,r.author).nickname)}),r.author===e.myId&&c.a.createElement(un.a,null,c.a.createElement(Ne.a,{onClick:function(){e.deleteTask(e.taskId)},edge:"end","aria-label":"comments"},c.a.createElement(fn.a,null))))})),En=Object(Oe.a)((function(e){return Object(ve.a)({root:{width:"100%",maxWidth:600,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column"},progress:{alignSelf:"center",margin:e.spacing(2)},itemSecondaryText:{display:"flex",justifyContent:"space-between"}})})),bn={setFetching:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ne(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getTasks:oe,setCountOfShownTasks:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ce(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},gn=Object(Xe.b)((function(e){return{isFetching:e.tasks.isFetching,isAuth:e.auth.isAuth,usersIsFetching:e.users.isFetching,selectedProjectId:e.projects.selectedProjectId,tasks:e.tasks.tasks,filter:e.tasks.filter,sort:e.tasks.sort,tasksOnClient:e.clientSideDb.clientSideData.tasks}}),bn)((function(e){Object(r.useEffect)((function(){e.usersIsFetching?e.setFetching(!0):null!==e.selectedProjectId&&e.getTasks([e.selectedProjectId],null)}),[e.usersIsFetching]);var t=En(),n=e.tasks.filter((function(t){return!e.tasksOnClient.deleted.filter((function(e){return e===t.id})).length})).filter((function(t){var n=null===e.filter.status||t.isDone===e.filter.status,a=!(e.filter.userIds&&e.filter.userIds.length>0)||e.filter.userIds.filter((function(e){return e===t.author})).length>0,r=!e.filter.content||t.title.match(new RegExp(e.filter.content,"gi"));return n&&a&&r}));return n=n.sort((function(t,n){var a=function(e,t,n){return null!==n?!0===n?e.isDone===t.isDone?0:e.isDone>t.isDone?-1:1:e.isDone===t.isDone?0:e.isDone<t.isDone?-1:1:0}(t,n,e.sort.firstCompleted),r=function(e,t,n){var a=parseInt(e.date)-parseInt(t.date);return!0===n?-1*a:a}(t,n,e.sort.firstNew);return 0!==a?a:r})),Object(r.useEffect)((function(){e.setCountOfShownTasks(n.length)}),[n]),c.a.createElement(ln.a,{maxWidth:"sm"},c.a.createElement(De.a,{className:t.root},e.isFetching&&e.isAuth?c.a.createElement(rt.a,{className:t.progress,size:50}):e.isAuth&&n.map((function(e){return c.a.createElement(hn,{key:e.id,taskId:e.id})}))))})),jn=n(255),On=n(312),vn=n(45),kn=n(119),wn=n(313),In=n(314),Sn=n(315),yn=n(316),Tn=n(254),Nn={showLoginForm:M,login:R,setLoginErrorMessage:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(U(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},_n=Object(Xe.b)((function(e){return{loginErrorMessage:e.auth.loginErrorMessage}}),Nn)((function(e){var t=function(){e.showLoginForm(!1)};return c.a.createElement("div",null,c.a.createElement(On.a,{open:!0,onClose:t,"aria-labelledby":"form-dialog-title"},c.a.createElement(vn.c,{initialValues:{email:"",password:""},validate:function(e){var t,n={};return e.email?(t=e.email,/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)||(n.email="\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0430\u0434\u0440\u0435\u0441\u0430")):n.email="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",e.password||(n.password="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),n},onSubmit:function(t,n){var a=n.setSubmitting;setTimeout(Object(k.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setLoginErrorMessage(null),n.next=3,e.login(t.email,t.password);case 3:a(!1);case 4:case"end":return n.stop()}}),n)}))),0)}},(function(n){var a=n.submitForm,r=n.isSubmitting;return c.a.createElement(vn.b,null,c.a.createElement(wn.a,{id:"form-dialog-title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),c.a.createElement(In.a,null,c.a.createElement(Sn.a,null,c.a.createElement(pt.a,{variant:"caption"},"test user data. email: 'testuser@email.com' password: 'testuser_pass'")),c.a.createElement(vn.a,{component:kn.a,name:"email",autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0}),c.a.createElement("br",null),c.a.createElement(vn.a,{component:kn.a,name:"password",margin:"dense",id:"password",label:"Password",type:"password",fullWidth:!0}),c.a.createElement("br",null)),e.loginErrorMessage&&c.a.createElement(In.a,null,c.a.createElement(Tn.a,{id:"my-helper-text",error:!0},e.loginErrorMessage)),c.a.createElement(yn.a,null,c.a.createElement(kt.a,{onClick:a,color:"primary",disabled:r},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(kt.a,{onClick:t,color:"primary",disabled:r},"\u041e\u0442\u043c\u0435\u043d\u0430")))}))))})),Fn=Object(Oe.a)((function(e){return Object(ve.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(l.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),Cn={appInitializing:function(){return function(){var e=Object(k.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=x.a.get("email"),a=x.a.get("password"),!n||!a){e.next=8;break}return e.next=6,t(R(n,a));case 6:e.next=9;break;case 8:t(M(!0));case 9:t(fe(!0)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}},xn=Object(Xe.b)((function(e){return{isInitialized:e.app.isInitialized,isAuth:e.auth.isAuth,loginFormShown:e.auth.loginFormShown}}),Cn)((function(e){console.log('Component "App" was drawed'),Object(r.useEffect)((function(){e.appInitializing()}),[]),window.api=a,window.counter=je,window.dispatch=be.dispatch,window.thunk={},window.thunk.login=R,window.thunk.logout=L,window.thunk.getProjects=K,window.thunk.getUsers=Y,window.thunk.getTasks=oe;var t=Fn(),n=Object(ke.a)(),s=c.a.useState(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],d=function(){u(!l)},m=c.a.createElement("div",null,c.a.createElement("div",{className:t.toolbar}),c.a.createElement(Se.a,null),c.a.createElement(ft,null));return c.a.createElement("div",{className:t.root},c.a.createElement(jn.a,{className:t.backdrop,open:!e.isInitialized},c.a.createElement(Ve.a,{color:"inherit"})),e.loginFormShown&&c.a.createElement(_n,null),c.a.createElement(Ie.a,null),c.a.createElement(we.a,{position:"fixed",className:t.appBar},c.a.createElement(_e.a,null,c.a.createElement(Ne.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:t.menuButton},c.a.createElement(Ce.a,null)),c.a.createElement(St,null))),c.a.createElement("nav",{className:t.drawer,"aria-label":"menu folders"},c.a.createElement(Te.a,{smUp:!0,implementation:"css"},c.a.createElement(ye.a,{variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:l,onClose:d,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},m)),c.a.createElement(Te.a,{xsDown:!0,implementation:"css"},c.a.createElement(ye.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},m))),e.isAuth&&c.a.createElement("main",{className:t.content},c.a.createElement("div",{className:t.toolbar}),c.a.createElement(on,null),c.a.createElement(gn,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Xe.a,{store:be},c.a.createElement(xn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.7457e96c.chunk.js.map